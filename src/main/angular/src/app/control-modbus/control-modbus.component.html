<div [formGroup]="form">
  <div class="ui fields">
    <div class="field">
      <label>{{'ControlModbusComponent.idref' | translate}}</label>
      <select class="ui fluid dropdown" formControlName="modbusTcpId">
        <option *ngFor="let modbusSetting of modbusSettings" [ngValue]="modbusSetting.modbusTcpId"
                [selected]="modbusSetting.modbusTcpId==modbusSwitch.idref">
          {{modbusSetting.modbusTcpId}}</option>
      </select>
    </div>
    <div class="field">
      <label>{{'ControlModbusComponent.slaveAddress' | translate}}</label>
      <input type="text" formControlName="slaveAddress">
      <div *ngIf="errors.slaveAddress" class="ui negative message">
        {{errors.slaveAddress}}</div>
    </div>
  </div>
  <app-modbus-write *ngFor="let modbusWrite of modbusSwitch.modbusWrites; index as i; last as l"
    [modbusWrite]="modbusWrite"
    [maxValues]="2"
    [formControlNamePrefix]="getWriteFormControlPrefix(i)"
    [valueNames]="valueNames"
    [writeRegisterTypes]="settingsDefaults.modbusWriteRegisterTypes"
    [translationPrefix]="'ControlModbusComponent.'"
    [translationKeys]="valueNameTextKeys"
    #modbusWrites
  ></app-modbus-write>
</div>
